import requests


# Функция для получения курса валют
def get_exchange_rate():
    url = "https://api.exchangerate-api.com/v4/latest/RUB"
    response = requests.get(url)

    # Проверка ответа API
    if response.status_code != 200:
        print("Ошибка при получении данных о курсах валют.")
        return None, None

    data = response.json()
    return data['rates']['USD'], data['rates']['RUB']


# Функция для конвертации рублей в доллары
def convert_rub_to_usd(amount_rub):
    exchange_rate_usd, _ = get_exchange_rate()
    if exchange_rate_usd is None:
        return None  # Если курс не удалось получить

    # Используем обратный курс доллара
    inverse_exchange_rate = 1 / exchange_rate_usd
    amount_usd = amount_rub * inverse_exchange_rate
    return amount_usd, inverse_exchange_rate


def main():
    print("Добро пожаловать в конвертер валют!")
    while True:
        print("Введите сумму в рублях (или 'exit' для выхода):")
        user_input = input()

        if user_input.lower() == 'exit':
            print("Выход из программы.")
            break

        try:
            amount_rub = float(user_input)
            amount_usd, exchange_rate = convert_rub_to_usd(amount_rub)
            if amount_usd is not None:
                print(f"Курс: 1 RUB = {exchange_rate:.4f} USD")
                print(f"{amount_rub} RUB = {amount_usd:.4f} USD")
        except ValueError:
            print("Пожалуйста, введите корректное числовое значение.")


# Запуск программы
if __name__ == "__main__":
    main()
